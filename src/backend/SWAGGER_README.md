# Документация Swagger для API кормления рыб

Этот проект включает документацию Swagger для API кормления рыб.

## Настройка и установка

1. Установите необходимые зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Примените миграции:
   ```
   python manage.py migrate
   ```

3. Запустите сервер разработки:
   ```
   python manage.py runserver
   ```

   Или используйте предоставленный batch-файл:
   ```
   setup_swagger.bat
   ```

## Доступ к документации

После запуска сервера вы можете получить доступ к документации Swagger по адресу:

- **Swagger UI**: [http://localhost:8000/swagger/](http://localhost:8000/swagger/)
- **ReDoc**: [http://localhost:8000/redoc/](http://localhost:8000/redoc/)

## Конечные точки API

API включает следующие конечные точки:

### Аутентификация

- `POST /api/auth/login` - Аутентификация пользователя
- `POST /api/auth/token` - Валидация токена

### Управление кормлением

- `GET /api/feeding/form-data` - Получение данных формы для настройки кормления
- `GET /api/feeding` - Список всех задач кормления
- `POST /api/feeding` - Создание новой задачи кормления
- `GET /api/feeding/{id}` - Получение конкретной задачи кормления
- `PUT /api/feeding/{id}` - Обновление конкретной задачи кормления
- `DELETE /api/feeding/{id}` - Удаление конкретной задачи кормления

## Модели данных

API использует следующие основные модели данных:

- **Pool** - Представляет бассейн для рыбы
- **Feed** - Представляет тип корма для рыбы
- **Period** - Представляет период кормления
- **FeedingTask** - Представляет запланированную задачу кормления
- **User** - Представляет пользователя системы
- **System** - Представляет конфигурацию системы
- **Log** - Представляет системные журналы
- **Timetable** - Представляет расписание кормления
- **Feeding** - Представляет событие кормления

## Диаграмма структуры API

См. [Диаграмма структуры API](./api_diagram.md) для визуального представления конечных точек API.

## Диаграмма моделей данных

См. [Диаграмма моделей данных](./models_diagram.md) для визуального представления моделей данных.

## Использование Swagger UI

1. Откройте Swagger UI по адресу [http://localhost:8000/swagger/](http://localhost:8000/swagger/)
2. Изучите доступные конечные точки
3. Протестируйте API, нажав на конечную точку, а затем на кнопку "Try it out"
4. Заполните необходимые параметры и нажмите "Execute"
5. Просмотрите ответ

## Аутентификация

API использует аутентификацию JWT (JSON Web Token). Для аутентификации:

1. Используйте конечную точку `/api/auth/login` с действительными учетными данными
2. Включите полученный токен в заголовок Authorization как `Bearer <token>`
3. Вы можете проверить токены, используя конечную точку `/api/auth/token`

## Использование с Docker

Если вы используете Docker, убедитесь, что порт 8000 открыт в вашей конфигурации Docker. Swagger UI будет доступен по адресу `http://<ваш-docker-хост>:8000/swagger/`. 